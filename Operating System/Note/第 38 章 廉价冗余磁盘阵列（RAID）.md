## 第 38 章 廉价冗余磁盘阵列（RAID）

**问题描述：构建一个大型、快速、可靠的存储系统**

RAID 的内部由多个磁盘、内存（易失性和非易失性）以及一个或多个处理器来管理系统，就像是一个专门用来管理一组磁盘的计算机系统。

RAID带来的好处有：

- **性能（performance）**：并行使用多个磁盘可以大大加快 I/O 时间。评估方式基于 **工作负载**
- **容量（capacity）**：大型数据集需要大型磁盘。评估方式：给定一组 N 个磁盘的的情况下，RAID 的客户端可用的容量有多少。通常介于 `N` 和 `N/2`之间
- **可靠性（reliability）**：通过某种形式的冗余，RAID 可以容许损失一个磁盘并保持运行。评估方式为，给定的设计允许多少磁盘故障

### 接口和 RAID 内部

RAID 系统通常构建为单独的硬件盒，并通过标准连接（例如 SCSI 或者 SATA）来接入主机。

在内部，RAID 包括：

- 一个**微控制器**，运行固件以直到 RAID 的操作
- DRAM 这样的**易失性存储器**，在读取和写入的时候缓冲数据块
- **非易失性存储器**，安全地缓冲写入
- 专用的**逻辑电路**，用来执行奇偶校验计算

### RAID 0 级：条带化（Striping）

基本思想：以**轮转**的方式将磁盘阵列的块分布在磁盘上。目的是在对数组的连续块进行请求时，从阵列中获取最大的并行性。

每个磁盘上放置的块数称之为 **大块大小（chunk size）**

- 大块大小较 **小** 意味着许多文件将跨多个磁盘进行条带化，增加了对单个文件的读取和写入的**并行性**。与此同时跨多个磁盘访问块的 **定位时间** 会增加，因为整个请求的定位时间由所有驱动器是哪个请求的最大定位时间决定。
- 大块大小较 **大** ，减少了定位的时间，假设所有的块都在
